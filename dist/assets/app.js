!function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var r={};return e.m=t,e.c=r,e.p="/assets/",e(0)}([function(t,e,r){"use strict";function n(t,e){var r={};for(var n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r}function o(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.draw=e.drawCanvas=e.drawImage=e.drawText=e.drawRect=e.runAction=e.drawContext=void 0;var i=function(){function t(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=t[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{!n&&l.return&&l.return()}finally{if(o)throw i}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=r(1),l=e.drawContext=function t(e,r,n){return new Promise(function(i,a){if(r.length<1)return void i();r=[].concat(o(r));var l=r.shift();if(Array.isArray(l))t(e,l,n).then(function(){t(e,r,n).then(i,a)},a);else switch(l.type){case"text":s(e,l,n).then(function(){t(e,r,n).then(i,a)},a);break;case"image":u(e,l,n).then(function(){t(e,r,n).then(i,a)},a);break;case"rect":f(e,l,n).then(function(){t(e,r,n).then(i,a)},a);break;case"action":d(e,l,n).then(function(){t(e,r,n).then(i,a)},a);break;default:a(new Error("Not support layer-type: "+l.type))}})},d=e.runAction=function(t,e){return new Promise(function(r,n){var o=e.action,i=o(t);i instanceof Promise?i.then(r,n):r()})},f=e.drawRect=function(t,e,r){return new Promise(function(n,i){var l=e.debug,d=void 0===l||l,f=e.rect,s=e.fillStyle,u=void 0===s?r.color||r.fillStyle:s,c=e.strokeStyle,v=void 0===c?"rgba(255, 255, 255, 1)":c,h=e.lineWidth,y=void 0===h?2:h,g=e.shadowBlur,w=void 0===g?0:g,m=e.shadowColor,p=void 0===m?"rgba(0,0,0,0.5)":m,x=e.shadowOffsetX,b=void 0===x?0:x,k=e.shadowOffsetY,A=void 0===k?0:k,S={fillStyle:u,strokeStyle:v,lineWidth:y,shadowBlur:w,shadowColor:p,shadowOffsetX:b,shadowOffsetY:A};t.save(),t.beginPath(),t.rect.apply(t,o(f)),t.closePath(),Object.assign(t,S),(0,a.fillAndStroke)(t,e,r),t.restore(),d&&(0,a.debugLayer)(t,e),n()})},s=e.drawText=function(t,e,r){return new Promise(function(n,o){var i=e.debug,l=void 0===i||i,d=e.fillStyle,f=void 0===d?r.color:d,s=e.strokeStyle,u=void 0===s?"rgba(255, 255, 255, 1)":s,c=e.lineWidth,v=void 0===c?2:c,h=e.textAlign,y=void 0===h?"start":h,g=e.textBaseline,w=void 0===g?"top":g,m=e.fontVariant,p=void 0===m?"normal":m,x=e.fontStyle,b=void 0===x?"normal":x,k=e.fontWeight,A=void 0===k?"normal":k,S=e.fontSize,T=void 0===S?r.fontSize:S,P=e.fontFamily,O=void 0===P?r.fontFamily:P,L=e.fontUnit,j=void 0===L?"px":L;t.save();var C=b+" "+p+" "+A+" "+T+j+" "+O.replace(/[ ]/g,"\\ "),E={fillStyle:f,strokeStyle:u,textAlign:y,textBaseline:w,font:C,lineWidth:v};Object.assign(t,E),(0,a.textFillAndStroke)(t,e),t.restore(),l&&(0,a.debugLayer)(t,e),n()})},u=e.drawImage=function(t,e){return new Promise(function(r,n){var o=e.url,l=e.rect,d=e.debug,f=void 0===d||d,s=new Image;s.addEventListener("load",function n(o){this.removeEventListener("load",n);var d=this.width,s=this.height,u=i(l,4),c=u[0],v=u[1],h=u[2],y=void 0===h?d:h,g=u[3],w=void 0===g?s:g;t.save(),t.drawImage(this,0,0,d,s,c,v,y,w),t.restore(),f&&(0,a.debugLayer)(t,e),r()}),s.addEventListener("error",function n(o){this.removeEventListener("error",n),f&&(0,a.debugLayer)(t,e),r(o)}),s.setAttribute("src",o)})},c=e.drawCanvas=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.backgroundColor,o=void 0===n?"#ffffff":n,i=r.fontSize,a=void 0===i?22:i,d=r.fontFamily,f=void 0===d?"PingFangSC":d,s=r.color,u=void 0===s?"#888888":s,c=t.getContext("2d");return c.fillStyle=o,c.fillRect(0,0,t.width,t.height),l(c,e,{fontSize:a,fontFamily:f,color:u})},v=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.width,o=void 0===r?670:r,i=e.height,a=void 0===i?760:i,l=n(e,["width","height"]),d=document.createElement("canvas");return d.width=o,d.height=a,new Promise(function(e,r){c(d,t,l).then(function(){e(d.toDataURL("image/png"))},r)})};e.draw=v},function(t,e){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=t[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{!n&&l.return&&l.return()}finally{if(o)throw i}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=(e.fillAndStroke=function(t,e,r){var n=e.fill,o=void 0===n||n,i=e.stroke,a=void 0!==i&&i,l=e.strokeAhead,d=void 0!==l&&l;d?(o&&t.fill(),a&&t.stroke()):(a&&t.stroke(),o&&t.fill())},e.splitText=function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(n)return e.split(/[\r\n]+/);var o=[],i=e.split(""),a=[];do{for(;i.length>0;)if(a.push(i.shift()),t.measureText(a.join("")).width>r){i.unshift(a.pop());break}o.push(a.join("")),a=[]}while(i.length>0);return o});e.textFillAndStroke=function(t,e){var r=e.rect,i=e.fill,a=void 0===i||i,l=e.stroke,d=void 0!==l&&l,f=e.strokeAhead,s=void 0!==f&&f,u=e.text,c=void 0===u?"<No text>":u,v=e.multiLine,h=void 0!==v&&v,y=e.newlineManual,g=void 0!==y&&y,w=n(r,4),m=w[0],p=w[1],x=w[2],b=w[3],k=t.measureText(c).width;if(x>0&&x<k&&h){var A=o(t,c,x,g);A.forEach(function(e,r){s?(a&&t.fillText(e,m,p+r*b),d&&t.strokeText(e,m,p+r*b)):(d&&t.strokeText(e,m,p+r*b),a&&t.fillText(e,m,p+r*b))}),r[3]=b*A.length}else s?(a&&t.fillText(c,m,p),d&&t.strokeText(c,m,p)):(d&&t.strokeText(c,m,p),a&&t.fillText(c,m,p)),r[2]=t.measureText(c).width},e.debugLayer=function(t,e){var n=e.rect,o=void 0===n?[]:n;t.save(),t.strokeStyle="#000",t.beginPath(),t.rect.apply(t,r(o)),t.closePath(),t.stroke()}}]);
//# sourceMappingURL=app.js.map